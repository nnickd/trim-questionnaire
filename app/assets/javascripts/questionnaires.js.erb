$(document).on('turbolinks:load', function() {

  $('input[type=number]').change(function() {
    if (pointsLeft() < 0) {
      this.value = Number(this.value) + pointsLeft();
    }
    if (this.value === '') {
      this.value = 0;
    }

    $('.points').html(pointsLeft());
  });

  var totalPoints = 50;

  var currentTotal = function() {
    var total = 0;
    $('input[type=number]').each(function() {
      total += Number(this.value);
    });
    return total;
  };

  var pointsLeft = function() {
    return totalPoints - currentTotal();
  };

});
